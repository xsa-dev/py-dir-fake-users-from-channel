Metadata-Version: 2.4
Name: py-dir-fake-users-from-channel
Version: 0.1.0
Summary: Telegram channel fake users scanner and remover
Author: Telegram Scanner Team
License: MIT
Project-URL: Homepage, https://github.com/yourusername/py-dir-fake-users-from-channel
Project-URL: Repository, https://github.com/yourusername/py-dir-fake-users-from-channel.git
Project-URL: Issues, https://github.com/yourusername/py-dir-fake-users-from-channel/issues
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Communications :: Chat
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: telethon>=1.34.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: tqdm>=4.66.0
Requires-Dist: pandas>=2.0.0
Requires-Dist: tabulate>=0.9.0
Requires-Dist: asyncio-throttle>=1.0.2
Requires-Dist: aiofiles>=23.2.1
Requires-Dist: openpyxl>=3.1.0
Requires-Dist: aiosqlite>=0.21.0

# Telegram Channel Users Scanner and Cleaner

Инструмент для сканирования и удаления удаленных аккаунтов (deleted accounts) из Telegram каналов. Оптимизирован для работы с каналами с миллионами подписчиков.

## Особенности

- Двухэтапный подход: сначала выгрузка всех участников, затем анализ и удаление
- Оптимизация для больших каналов: пакетная обработка, минимальное потребление RAM
- Безопасное удаление: предварительный просмотр, подтверждение, откат действий
- Возобновление операций: чекпоинты для прерванных процессов
- Подробная отчетность: CSV, JSON, текстовые отчеты
- Гибкая аналитика: поиск deleted accounts по разным паттернам

## Архитектура

```
project/
├── main.py                    # Основной скрипт с меню
├── config.py                  # Конфигурация и API ключи
├── database.py               # SQLite база данных
├── exporter.py               # Выгрузка участников
├── analyzer.py               # Анализ удаленных аккаунтов
├── deleter.py                # Безопасное удаление
├── reporter.py               # Генерация отчетов
├── checkpoint_manager.py     # Управление чекпоинтами
├── .env.example              # Шаблон конфигурации
└── requirements.txt          # Зависимости
```

## Установка

### 1. Клонирование и установка зависимостей

```bash
git clone <repository-url>
cd py_dir_fake_users_from_channel

# Активация виртуального окружения
python -m venv .venv
source .venv/bin/activate  # Для Windows: .venv\Scripts\activate

# Установка зависимостей
pip install -e .
```

### 2. Получение API ключей Telegram

1. Перейдите на [my.telegram.org](https://my.telegram.org)
2. Войдите под своим аккаунтом
3. Перейдите в "API development tools"
4. Создайте новое приложение
5. Сохраните `api_id` и `api_hash`

### 3. Настройка

Скопируйте шаблон конфигурации:

```bash
cp .env.example .env
```

Отредактируйте `.env` файл:

```env
# Telegram API Configuration
API_ID=12345678
API_HASH=abcdef1234567890abcdef1234567890
PHONE_NUMBER=+79991234567

# Database Configuration
DATABASE_NAME=channel_users.db

# Export Configuration (оптимизировано для больших каналов)
BATCH_SIZE=2000
CHECKPOINT_INTERVAL=10000
REQUEST_DELAY=0.033  # ~30 запросов в секунду

# Channel Configuration
CHANNEL_USERNAME=@your_channel

# Deletion Configuration
DELETE_BATCH_SIZE=100
DELETE_DELAY=0.1
DELETE_CONFIRMATION=true
```

## Использование

### Запуск приложения

```bash
python main.py
```

### Основной workflow

#### 1. Экспорт участников канала

```
1. Экспортировать участников канала
   → Введите имя канала (@channel_name)
   → Ожидание завершения (для 1М пользователей: 2-4 часа)
```

#### 2. Анализ удаленных аккаунтов

```
2. Анализировать удаленные аккаунты
   → Автоматический поиск по паттернам
   → Показ результатов анализа
   → Сохранение отчетов
```

#### 3. Удаление пользователей

```
4. Удалить пользователей
   → Предпросмотр кандидатов
   → Подтверждение удаления
   → Пакетное удаление с паузами
```

### Оптимизации для больших каналов

- **Память**: < 300MB RAM для 1М пользователей
- **База данных**: SQLite с индексами для быстрых запросов
- **Пакетная обработка**: 2000 пользователей за раз
- **Лимиты API**: Умная обработка лимитов Telegram (30 запросов/сек)
- **Чекпоинты**: Возобновление после обрывов
- **Прогресс**: Детальный прогресс-бар с ETA

## Анализ удаленных аккаунтов

Система ищет аккаунты по следующим паттернам:

- `Deleted Account`
- `Deleted User`
- `user[numbers]`
- Пустые и дефолтные имена
- Отсутствие username

## Безопасность

- Предпросмотр перед удалением
- Подтверждение пользователя
- Резервные копии в БД
- Логирование всех операций
- Обработка ошибок без остановки
- Права администратора проверяются

## Отчеты

Система генерирует отчеты в форматах:

- **CSV**: Для анализа в Excel
- **JSON**: Для интеграции с другими системами
- **Текстовый**: Краткая сводка

Файлы сохраняются в папке `reports/`.

## Командная строка

Также можно использовать отдельные модули:

```python
# Прямое использование в Python
from exporter import TelegramExporter
from analyzer import DeletedUserAnalyzer
from deleter import TelegramUserDeleter

async def scan_channel():
    # Инициализация
    client = TelegramClient('session', api_id, api_hash)
    db = DatabaseManager('users.db')
    await db.init_database()

    # Экспорт
    exporter = TelegramExporter(client, db)
    stats = await exporter.export_channel_participants('@channel_name')

    # Анализ
    analyzer = DeletedUserAnalyzer(db)
    deleted = await analyzer.find_deleted_accounts()

    print(f"Найдено deleted accounts: {len(deleted)}")
```

## Troubleshooting

### Ошибки аутентификации
- Убедитесь, что API ID и API Hash верные
- Проверьте формат номера телефона (+79991234567)
- Для двухфакторной аутентификации потребуется пароль

### Проблемы с большими каналами
- Увеличьте `CHECKPOINT_INTERVAL` для большей стабильности
- Уменьшите `BATCH_SIZE` если возникают ошибки API
- Используйте премиум аккаунт для повышенных лимитов

### Ошибки удаления
- Проверьте права администратора в канале
- Убедитесь, что вы не были удалены из канала
- Некоторые типы каналов могут ограничивать удаление

## Требования

- Python 3.12+
- Telegram API ключи
- Права администратора в целевом канале (для удаления)
- Стабильное интернет-соединение

## Лицензия

MIT License

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## Support

При возникновении проблем:
1. Проверьте логи ошибок
2. Убедитесь в правильности конфигурации
3. Попробуйте с меньшими BATCH_SIZE
4. Используйте чекпоинты для возобновления

---

**Внимание**: Удаление пользователей — необратимая операция. Всегда делайте бэкапы и внимательно проверяйте списки перед удалением!
